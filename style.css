:root{
  --brand:#004aad;--brand-dark:#003080;--bg:#f5f7fb;--card:#ffffff;--text:#1a1f36;
  --muted:#697386;--border:#e5e8f0;--danger:#e45757;--op:#2a6ef1;--op-dark:#1f55b7;
  --equals:#ff7a2f;--equals-dark:#e3661d;--warn:#ffd9d9
}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
.appbar{background:var(--brand);color:#fff;text-align:center;padding:12px 10px 8px}
.appbar .title{font-weight:700;letter-spacing:.5px}.appbar .subtitle{opacity:.9;font-size:.9rem}
.wrap{max-width:520px;margin:8px auto;padding:0 10px 12px}

/* Display two-column */
.display{background:var(--card);border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.06);border:1px solid var(--border);margin-bottom:10px}
.display.two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:10px}
.display .label{font-weight:700;color:var(--muted);margin-bottom:6px}
.display .value{font-variant-numeric:tabular-nums}
.display .multiline{white-space:normal;word-break:break-word;min-height:2.2em}

/* Pads layout */
.pads-grid{display:grid;grid-template-columns:1fr;gap:8px}
.pad-section{background:var(--card);border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.06);border:1px solid var(--border);padding:10px}
.pad-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.pad-header h2{margin:0;font-size:1rem}
.chip{border:none;border-radius:999px;padding:6px 12px;font-weight:600;cursor:pointer}
.chip.ghost{background:#eef2fb;color:#394a8b}.chip.danger{background:var(--danger);color:#fff}
.pad.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.pad.grid .spacer{visibility:hidden}
.pad.grid button{border:none;border-radius:999px;padding:14px 0;font-size:1.05rem;font-weight:700;background:#f0f3fb;color:#2b2f3a;box-shadow:inset 0 -2px 0 rgba(0,0,0,.08);cursor:pointer}
.pad.grid button:active{transform:translateY(1px)}.pad.grid button.wide{grid-column:2/3}

/* Warn state */
.pad.warn{animation:flash 0.9s ease;outline:3px solid var(--warn);outline-offset:2px;border-radius:12px}
@keyframes flash{0%{outline-color:var(--warn)}50%{outline-color:transparent}100%{outline-color:var(--warn)}}

.actions-row{display:flex;justify-content:center;margin:8px 0}
.ops-row{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:8px}
.op{border:none;border-radius:999px;padding:14px 0;font-size:1.15rem;font-weight:800;background:var(--op);color:#fff;cursor:pointer;box-shadow:0 3px 10px rgba(42,110,241,.2)}
.op:hover{background:var(--op-dark)}.op.equals{background:var(--equals)}.op.equals:hover{background:var(--equals-dark)}

.history-wrap{background:var(--card);border-radius:12px;border:1px solid var(--border);box-shadow:0 4px 14px rgba(0,0,0,.06);padding:8px 10px;margin-top:6px}
.history{max-height:220px;overflow:auto;border-top:1px solid var(--border);padding-top:8px}.history-entry{padding:8px 0;border-bottom:1px dashed var(--border)}
.footer{text-align:center;color:var(--muted);padding:8px 0}

/* --- COMPACT MODE: fit on most phones without scrolling --- */
@media (max-width: 430px), (max-height: 900px){
  .appbar{padding:8px 8px 6px}
  .appbar .subtitle{display:none}
  .wrap{max-width:430px;padding:0 8px 8px}
  .display.two-col{gap:8px;padding:8px}
  .pad-section{padding:8px}
  .pad.grid{gap:6px}
  .pad.grid button{padding:10px 0;font-size:1rem}
  .ops-row{gap:6px}
  .op{padding:12px 0;font-size:1.05rem}
  .pads-grid{grid-template-columns:1fr 1fr;gap:6px}
  /* Put Denominator full width on second row */
  #pad-den{grid-column:1 / -1}
  /* Hide history to avoid scroll on compact view */
  .history-wrap{display:none}
}
